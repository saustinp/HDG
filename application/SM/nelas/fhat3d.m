function [fh,fh_udg,fh_uh] = fhat3d(nl,pg,udg,uh,param,time)
%FHAT3D
%    [FH,FH_UDG,FH_UH] = FHAT3D(NL,PG,UDG,UH,PARAM,TIME)

%    This function was generated by the Symbolic Math Toolbox version 5.4.
%    10-Jul-2011 17:34:02
[ng,nc] = size(udg);
nch = 3;
nd = 3;
mu = param{1};
nl1 = nl(:,1);
nl2 = nl(:,2);
nl3 = nl(:,3);
one = ones(ng,1);
pres = udg(:,4);
q11 = udg(:,5);
q12 = udg(:,8);
q13 = udg(:,11);
q21 = udg(:,6);
q22 = udg(:,9);
q23 = udg(:,12);
q31 = udg(:,7);
q32 = udg(:,10);
q33 = udg(:,13);
tau = param{3};
u1 = udg(:,1);
u2 = udg(:,2);
u3 = udg(:,3);
uh1 = uh(:,1);
uh2 = uh(:,2);
uh3 = uh(:,3);
zero = zeros(ng,1);
t2131 = q21.*q32;
t2158 = q22.*q31;
t2132 = t2131-t2158;
t2133 = q21.*q33;
t2159 = q23.*q31;
t2134 = t2133-t2159;
t2135 = q11.*q22.*q33;
t2136 = q12.*q23.*q31;
t2137 = q13.*q21.*q32;
t2142 = q11.*q23.*q32;
t2143 = q12.*q21.*q33;
t2144 = q13.*q22.*q31;
t2138 = -t2142-t2143+t2135-t2144+t2136+t2137;
t2139 = 1.0./t2138;
t2140 = q22.*q33;
t2160 = q23.*q32;
t2141 = t2140-t2160;
t2145 = q11.*q32;
t2161 = q12.*q31;
t2146 = -t2161+t2145;
t2147 = q11.*q33;
t2162 = q13.*q31;
t2148 = -t2162+t2147;
t2149 = q12.*q33;
t2163 = q13.*q32;
t2150 = -t2163+t2149;
t2151 = q11.*q22;
t2164 = q12.*q21;
t2152 = t2151-t2164;
t2153 = q11.*q23;
t2165 = q13.*q21;
t2154 = t2153-t2165;
t2155 = q12.*q23;
t2166 = q13.*q22;
t2156 = t2155-t2166;
fh = [-nl1.*(-mu.*q11+pres.*t2141+mu.*t2141.*t2139)+nl2.*(mu.*q12+pres.*t2134+mu.*t2134.*t2139)-nl3.*(-mu.*q13+pres.*t2132+mu.*t2132.*t2139)+tau.*(u1-uh1);nl1.*(mu.*q21+pres.*t2150+mu.*t2150.*t2139)-nl2.*(-mu.*q22+pres.*t2148+mu.*t2139.*t2148)+nl3.*(mu.*q23+pres.*t2146+mu.*t2146.*t2139)+tau.*(u2-uh2);-nl1.*(-mu.*q31+pres.*t2156+mu.*t2156.*t2139)+nl2.*(mu.*q32+pres.*t2154+mu.*t2154.*t2139)-nl3.*(-mu.*q33+pres.*t2152+mu.*t2152.*t2139)+tau.*(u3-uh3)];
if nargout > 1
    t2157 = one.*tau;
    t2167 = 1.0./t2138.^2;
    t2168 = pres.*q32;
    t2169 = mu.*q32.*t2139;
    t2170 = pres.*q33;
    t2171 = mu.*q33.*t2139;
    t2172 = pres.*q22;
    t2173 = mu.*q22.*t2139;
    t2174 = pres.*q23;
    t2175 = mu.*q23.*t2139;
    t2176 = mu.*nl1.*t2141.*t2156.*t2167;
    t2177 = pres.*q12;
    t2178 = mu.*q12.*t2139;
    t2179 = pres.*q13;
    t2180 = mu.*q13.*t2139;
    t2181 = mu.*t2150.*t2134.*t2167;
    t2182 = t2170+t2171+t2181;
    t2183 = mu.*t2134.*t2156.*t2167;
    t2184 = t2174+t2183+t2175;
    t2185 = pres.*q31;
    t2186 = mu.*q31.*t2139;
    t2187 = t2170+t2171-mu.*t2141.*t2148.*t2167;
    t2188 = mu.*t2156.*t2148.*t2167;
    t2189 = t2180+t2179+t2188;
    t2190 = pres.*q21;
    t2191 = mu.*q21.*t2139;
    t2192 = t2174+t2175-mu.*t2141.*t2154.*t2167;
    t2193 = mu.*nl2.*t2134.*t2154.*t2167;
    t2194 = pres.*q11;
    t2195 = mu.*q11.*t2139;
    t2196 = t2180+t2179-mu.*t2150.*t2154.*t2167;
    t2197 = mu.*t2132.*t2148.*t2167;
    t2198 = t2185+t2186+t2197;
    t2199 = mu.*t2132.*t2150.*t2167;
    t2200 = t2168+t2169+t2199;
    t2201 = mu.*t2132.*t2154.*t2167;
    t2202 = t2190+t2191+t2201;
    t2203 = mu.*t2132.*t2156.*t2167;
    t2204 = t2172+t2173+t2203;
    t2205 = t2185+t2186-mu.*t2134.*t2146.*t2167;
    t2206 = t2168+t2169-mu.*t2141.*t2146.*t2167;
    t2207 = mu.*t2154.*t2146.*t2167;
    t2208 = t2194+t2195+t2207;
    t2209 = mu.*t2146.*t2156.*t2167;
    t2210 = t2177+t2178+t2209;
    t2211 = t2190+t2191-mu.*t2134.*t2152.*t2167;
    t2212 = t2172+t2173-mu.*t2141.*t2152.*t2167;
    t2213 = mu.*nl3.*t2132.*t2152.*t2167;
    t2214 = t2194+t2195-mu.*t2152.*t2148.*t2167;
    t2215 = t2177+t2178-mu.*t2150.*t2152.*t2167;
    fh_udg = [t2157;zero;zero;zero;t2157;zero;zero;zero;t2157;-nl1.*t2141+nl2.*t2134-nl3.*t2132;nl1.*t2150-nl2.*t2148+nl3.*t2146;-nl1.*t2156+nl2.*t2154-nl3.*t2152;nl1.*(mu+mu.*t2141.^2.*t2167)-mu.*nl2.*t2141.*t2134.*t2167+mu.*nl3.*t2132.*t2141.*t2167;-nl2.*t2187+nl3.*t2206-mu.*nl1.*t2141.*t2150.*t2167;t2176+nl2.*t2192-nl3.*t2212;nl2.*t2182-nl3.*t2200-mu.*nl1.*t2141.*t2150.*t2167;nl1.*(mu+mu.*t2150.^2.*t2167)-mu.*nl2.*t2150.*t2148.*t2167+mu.*nl3.*t2150.*t2146.*t2167;-nl2.*t2196+nl3.*t2215-mu.*nl1.*t2150.*t2156.*t2167;t2176-nl2.*t2184+nl3.*t2204;nl2.*t2189-nl3.*t2210-mu.*nl1.*t2150.*t2156.*t2167;nl1.*(mu+mu.*t2156.^2.*t2167)-mu.*nl2.*t2154.*t2156.*t2167+mu.*nl3.*t2152.*t2156.*t2167;nl2.*(mu+mu.*t2134.^2.*t2167)-mu.*nl1.*t2141.*t2134.*t2167-mu.*nl3.*t2132.*t2134.*t2167;nl1.*t2182-nl3.*t2205-mu.*nl2.*t2134.*t2148.*t2167;t2193-nl1.*t2184+nl3.*t2211;-nl1.*t2187+nl3.*t2198-mu.*nl2.*t2134.*t2148.*t2167;nl2.*(mu+mu.*t2148.^2.*t2167)-mu.*nl1.*t2150.*t2148.*t2167-mu.*nl3.*t2146.*t2148.*t2167;nl1.*t2189-nl3.*t2214-mu.*nl2.*t2154.*t2148.*t2167;t2193+nl1.*t2192-nl3.*t2202;-nl1.*t2196+nl3.*t2208-mu.*nl2.*t2154.*t2148.*t2167;nl2.*(mu+mu.*t2154.^2.*t2167)-mu.*nl1.*t2154.*t2156.*t2167-mu.*nl3.*t2152.*t2154.*t2167;nl3.*(mu+mu.*t2132.^2.*t2167)+mu.*nl1.*t2132.*t2141.*t2167-mu.*nl2.*t2132.*t2134.*t2167;-nl1.*t2200+nl2.*t2198-mu.*nl3.*t2132.*t2146.*t2167;t2213+nl1.*t2204-nl2.*t2202;nl1.*t2206-nl2.*t2205-mu.*nl3.*t2132.*t2146.*t2167;nl3.*(mu+mu.*t2146.^2.*t2167)+mu.*nl1.*t2150.*t2146.*t2167-mu.*nl2.*t2146.*t2148.*t2167;-nl1.*t2210+nl2.*t2208-mu.*nl3.*t2152.*t2146.*t2167;t2213-nl1.*t2212+nl2.*t2211;nl1.*t2215-nl2.*t2214-mu.*nl3.*t2152.*t2146.*t2167;nl3.*(mu+mu.*t2152.^2.*t2167)+mu.*nl1.*t2152.*t2156.*t2167-mu.*nl2.*t2152.*t2154.*t2167];
end
if nargout > 2
    fh_uh = [-t2157;zero;zero;zero;-t2157;zero;zero;zero;-t2157];
end
fh = reshape(fh,ng,nch);
fh_udg = reshape(fh_udg,ng,nch,nc);
fh_uh = reshape(fh_uh,ng,nch,nch);
